# Recon MCP - ネットワークスキャンツール

Recon MCPは、Claude DesktopとDockerを活用した高度なネットワークスキャンツールです。
nmapを使用してターゲットシステムのスキャンとWEBサイトの隠しディレクトリを探索し、
Claude Desktopの知識ベースを活用して脆弱性情報と対策を提供します。

## 特徴

- Claude Desktopとの統合による高度な脆弱性分析
- Dockerコンテナによる安全で効率的なスキャン環境
- 包括的なポートスキャンとサービス検出
- Webサイトの隠しディレクトリ探索
- サブドメインの自動探索
- 日本語での詳細なレポート出力
- VPNのオンオフに対応

## 必要条件

- Claude Desktop
- Docker

## セットアップ手順

1. Claude Desktopをインストール

2. このリポジトリをクローン：
```bash
git clone https://github.com/yourusername/recon-mcp.git
cd recon-mcp
```

3. Claude Desktop設定ファイルの配置：
- 以下のパスにMCPサーバー設定ファイルを配置：
```
C:\Users\<ユーザー名>\AppData\Roaming\Claude\claude_desktop_config.json
```

## 使用方法

### 基本的な使用
1. docker imageをビルド
2. Claude Desktopを起動
3. 以下のような形式で質問を入力：
```
<対象IPアドレス>をスキャンして
```

### VPNのオンオフ
Hack The BoxやTry Hack Meといった教育用環境での使用のため、VPNの使用有無を切り替えることができます。
VPNを使用する場合は、以下を実施してから使用してください。

1. プロジェクトフォルダ（recon-mcp）内にvpnフォルダを作成
2. vpnフォルダ内に、自分用に発行された.ovpnファイルを配置（例：test.ovpn）
3. Claude Desktopに読み込ませる設定ファイルは、`claude_desktop_config_vpn_ver.json`を使用
4. 設定ファイル内のVPN設定ファイルパスが正しいことを確認（`VPN_CONFIG_PATH=/vpn/test.ovpn`）

注意：
- VPN設定ファイルは読み取り専用（:ro）でマウントされます
- 認証情報が必要な場合は、vpnフォルダ内にauth.txtを作成し、設定ファイルに`VPN_AUTH_PATH=/vpn/auth.txt`を追加してください
- VPN接続の状態は、スキャン実行時に自動的に確認されます

### スキャンの種類

1. 基本スキャン：
```
<対象IPアドレス>の基本的なポートスキャンをして
```

2. バージョン検出：
```
<対象IPアドレス>のサービスバージョンを詳しく調べて
```

3. 特定ポートのスキャン：
```
<対象IPアドレス>の80番と443番ポートをスキャンして
```

4. ディレクトリスキャン：
```
<URL>のディレクトリスキャンをして
```

例：
```
http://example.com/のディレクトリを探索して
https://test.com/のバックアップファイルを探して
```

検出可能な項目：
- 管理者ページ
- 設定ファイル
- バックアップファイル
- テストページ
- 開発用ページ

5. サブドメインスキャン：
```
<ドメイン>のサブドメインを探索して
```

例：
```
example.comのサブドメインを探して
test.comの全てのサブドメインを列挙して
```

検出可能な項目：
- 開発環境サブドメイン
- テスト環境サブドメイン
- 管理用サブドメイン
- APIエンドポイント
- レガシーシステム

### 脆弱性情報の問い合わせ

スキャン結果から検出されたサービスについて、以下のように質問できます：

1. 基本的な質問：
```
検出された<サービス名> <バージョン>の既知の脆弱性と対策方法を教えてください
```

2. 具体的な質問例：
```
Apache 2.4.49の脆弱性とエクスプロイト方法、対策について教えてください
```

## セキュリティ注意事項

- スキャンは必ず許可された環境でのみ実行してください
- 本番環境での使用は避け、テスト環境で実施してください
- スキャン結果には機密情報が含まれる可能性があるため、適切に管理してください
- ディレクトリスキャンは対象サイトに負荷をかける可能性があります
- サブドメインスキャンはDNSサーバーに負荷をかける可能性があります

## 制限事項

- スキャンのタイムアウト：5分
- ディレクトリスキャンのタイムアウト：10分
- サブドメインスキャンのタイムアウト：5分
- 同時スキャン数：1つのスキャンのみ実行可能

## ライセンス

MITライセンス

## 貢献

バグ報告や機能リクエストは、GitHubのIssueでお願いします。
プルリクエストも歓迎します。

## 連絡先

問題や提案がありましたら、GitHubのIssueを作成してください。
